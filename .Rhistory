5+5
write("Hello World!", file = paste0("SIASUS-", ano_mes_atual, ".txt"))
library(tidyverse)
library(tidyverse)
ano_mes_atual <- format(Sys.time(), "%Y-%m")
write("Hello World!", file = paste0("SIASUS-", ano_mes_atual, ".txt"))
write("Hello World!", file = paste0("SIASUS-", ano_mes_atual, ".txt"))
write("Hello World!", file = paste0("SIASUS-", ano_mes_atual, ".txt"), overwrite = TRUE)
library(tidyverse)
ano_mes_atual <- format(Sys.time(), "%Y-%m")
write("Hello World!", file = paste0("SIASUS-", ano_mes_atual, ".txt"))
write("Hello World!", file = paste0("SIASUS-", ano_mes_atual, ".txt"))
setwd("~/projetos/datasus-etl")
library(tidyverse)
ano_mes_atual <- format(Sys.time(), "%Y-%m")
write("Hello World!", file = paste0("SIASUS-", ano_mes_atual, ".txt"))
renv::init()
install.packages("renv")
renv::init()
renv::dependencies()
renv::dependencies()
library(arrow)
df <- data.frame(col1 = c(1, 2, 3), col2 = c("A", "B", "C"))
write_parquet(df, "nome_do_seu_arquivo.parquet")
source("~/projetos/datasus-etl/extrair-transformar-enviar-siasus.R")
source("~/projetos/datasus-etl/extrair-transformar-enviar-siasus.R")
library(microdatasus)
install.packages("microdatasus")
source("~/projetos/datasus-etl/extrair-transformar-enviar-siasus.R")
library(microdatasus)
remotes::install_github("rfsaldanha/microdatasus")
if (!require("microdatasus")) {
remotes::install_github("rfsaldanha/microdatasus")
}
library(arrow)
library(microdatasus)
ano = format(Sys.time(), "%Y")
mes = format(Sys.time(), "%m")
ano_mes_atual <- paste(ano, mes, sep="-")
uf = "DF"
file_name = paste(uf, "SIAPA", ano, mes, sep="_")
dados_originais <- fetch_datasus(month_start = mes, month_end = mes, year_start = ano, year_end = ano, uf = uf, information_system = "SIA-PA")
dados_pre_processados <- process_sia(dados_originais)
source("~/projetos/datasus-etl/extrair-transformar-enviar-siasus.R")
source("~/projetos/datasus-etl/extrair-transformar-enviar-siasus.R")
if (!require("microdatasus")) {
remotes::install_github("rfsaldanha/microdatasus")
}
library(arrow)
library(microdatasus)
inicio_mes_function <- function(x) {
as.Date(format(x, "%Y-%m-01"))
}
mes_anterior = inicio_mes_function(inicio_mes_function(Sys.Date()) - 2)
ano = format(mes_anterior, "%Y")
mes = format(mes_anterior, "%m")
ano_mes_atual <- paste(ano, mes, sep="-")
uf = "DF"
file_name = paste(uf, "SIAPA", ano, mes, sep="_")
dados_originais <- fetch_datasus(month_start = mes, month_end = mes, year_start = ano, year_end = ano, uf = uf, information_system = "SIA-PA")
dados_pre_processados <- process_sia(dados_originais)
source("~/projetos/datasus-etl/extrair-transformar-enviar-siasus.R")
if (!require("microdatasus")) {
remotes::install_github("rfsaldanha/microdatasus")
}
library(arrow)
library(microdatasus)
inicio_mes_function <- function(x) {
as.Date(format(x, "%Y-%m-01"))
}
mes_anterior = inicio_mes_function(inicio_mes_function(Sys.Date()) - 3)
source("~/projetos/datasus-etl/extrair-transformar-enviar-siasus.R")
if (!require("microdatasus")) {
remotes::install_github("rfsaldanha/microdatasus")
}
library(arrow)
library(microdatasus)
inicio_mes_function <- function(x) {
as.Date(format(x, "%Y-%m-01"))
}
mes_anterior = inicio_mes_function(inicio_mes_function(Sys.Date()) - 1)
if (!require("microdatasus")) {
remotes::install_github("rfsaldanha/microdatasus")
}
library(arrow)
library(microdatasus)
inicio_mes_function <- function(x) {
as.Date(format(x, "%Y-%m-01"))
}
mes_anterior = inicio_mes_function(inicio_mes_function(Sys.Date()) - 1)
source("~/projetos/datasus-etl/extrair-transformar-enviar-siasus.R")
source("~/projetos/datasus-etl/extrair-transformar-enviar-siasus.R")
source("~/projetos/datasus-etl/extrair-transformar-enviar-siasus.R")
if (!require("microdatasus")) {
remotes::install_github("rfsaldanha/microdatasus")
}
library(arrow)
library(microdatasus)
library(lubridate)
mes_anterior = floor_date(Sys.Date(), "month") - months(2)
ano = format(mes_anterior, "%Y")
mes = format(mes_anterior, "%m")
ano_mes_atual <- paste(ano, mes, sep="-")
uf = "DF"
file_name = paste(uf, "SIAPA", ano, mes, sep="_")
dados_originais <- fetch_datasus(month_start = mes, month_end = mes, year_start = ano, year_end = ano, uf = uf, information_system = "SIA-PA")
dados_pre_processados <- process_sia(dados_originais)
write_parquet(dados_pre_processados, paste0("SIASUS-", ano_mes_atual, ".parquet"))
renv::dependencies()
renv.init()
renv::init()
if (!require("microdatasus")) {
remotes::install_github("rfsaldanha/microdatasus")
}
library(arrow)
library(microdatasus)
library(lubridate)
sistema_informacao = "SIA-PA"
uf = "DF"
dois_meses_para_tras = floor_date(Sys.Date(), "month") - months(2)
ano = format(dois_meses_para_tras, "%Y")
mes = format(dois_meses_para_tras, "%m")
ano_mes_atual <- paste(ano, mes, sep="-")
file_name = paste(uf, sistema_informacao, ano, mes, sep="_")
dados_originais <- fetch_datasus(month_start = mes, month_end = mes, year_start = ano, year_end = ano, uf = uf, information_system = sistema_informacao)
dados_pre_processados <- process_sia(dados_originais)
write_parquet(dados_pre_processados, paste0(ano_mes_atual, "-", sistema_informacao, ".parquet"))
source("~/projetos/datasus-etl/extrair-transformar-enviar-siasus.R")
if (!require("microdatasus")) {
remotes::install_github("rfsaldanha/microdatasus")
}
library(arrow)
library(microdatasus)
library(lubridate)
sistema_informacao = "SIA-PA"
uf = "DF"
dois_meses_para_tras = floor_date(Sys.Date(), "month") - months(2)
ano = format(dois_meses_para_tras, "%Y")
mes = format(dois_meses_para_tras, "%m")
ano_mes_atual <- paste(ano, mes, sep="-")
nome_arquivo = paste0(ano_mes_atual, "-", sistema_informacao, ".parquet")
Sys.setenv(NOME_ARQUIVO = nome_arquivo)
dados_originais <- fetch_datasus(month_start = mes, month_end = mes, year_start = ano, year_end = ano, uf = uf, information_system = sistema_informacao)
dados_pre_processados <- process_sia(dados_originais)
write_parquet(dados_pre_processados, nome_arquivo)
Sys.getenv("R_TEST")
Sys.getenv("NOME_ARQUIVO")
if (!require("microdatasus")) {
remotes::install_github("rfsaldanha/microdatasus")
}
library(arrow)
library(microdatasus)
library(lubridate)
sistema_informacao = "SIA-PA"
uf = "DF"
dois_meses_para_tras = floor_date(Sys.Date(), "month") - months(2)
ano = format(dois_meses_para_tras, "%Y")
mes = format(dois_meses_para_tras, "%m")
ano_mes_atual <- paste(ano, mes, sep="-")
nome_arquivo = paste0(ano_mes_atual, "-", sistema_informacao, ".parquet")
Sys.setenv(NOME_ARQUIVO = nome_arquivo)
dados_originais <- fetch_datasus(month_start = mes, month_end = mes, year_start = ano, year_end = ano, uf = uf, information_system = sistema_informacao)
dados_pre_processados <- process_sia(dados_originais)
write_parquet(dados_pre_processados, nome_arquivo)
